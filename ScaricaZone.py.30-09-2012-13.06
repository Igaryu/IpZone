#!/usr/bin/python 
# -*- coding: utf-8 -*-

import os, tempfile, shutil, wget, subprocess

in_file = open("zone.list","r")

lista = in_file.readlines()

tmpDir = tempfile.mkdtemp(suffix='', prefix='JoeDir')
os.chdir(tmpDir)
tmpFile= open("FileTemporaneo.txt","w+")

for i in range(0,len(lista)):
	tmpFile.write(lista[i]),
os.system("clear")
print("\n\nScarico file totale zone: attendere un attimo ...") 
url = 'http://www.ipdeny.com/ipblocks/data/countries/all-zones.tar.gz'
gzFile = wget.download(url)
gzFile=tmpDir+"/"+gzFile
cmdName='/bin/tar xzf ' + gzFile
print("\n\nDecomprimo file zone...")
os.system(cmdName)

in_file.close() 
tmpFile.close()
raw_input("Premi un tasto per cancellare tutto e chiudere!!")

shutil.rmtree(tmpDir, ignore_errors=True)
